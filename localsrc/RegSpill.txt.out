##### SOURCE CODE #####
##+1+13+20##
PROGRAM registerSpillage   
  DECLARE
      INTEGER SCALAR index;
  END
  EXECUTE	
    index <- ((1+3) + ((3+4) + ((5+6) + ((7+8) ))));
##-20##
    STOUT "Register spillage should produce 37: %d\n",index;
  END  // end execute
END
###### SOURCE CODE WITH FOURTUPLES #####
Name: John Ingram and W. Clay Moody
Email: {jei,wcm}@clemson.edu
Date: 2013/04/04 10:41:09



##+1+13+20##
PROGRAM registerSpillage   
  DECLARE
				Four Tuple is	(20, FLAG, ON, --)
				Four Tuple is	(registerSpillage, BEGINPROGRAM, --, --)
      INTEGER SCALAR index;
				Four Tuple is	(index, MEMORY, 1, 1)
  END
  EXECUTE	
				Four Tuple is	(--, ENDDECLARATIONS, --, --)
    index <- ((1+3) + ((3+4) + ((5+6) + ((7+8) ))));
				Four Tuple is	(main, LABEL, --, --)
				Four Tuple is	(I$0, IADD, 3, 1)
				Four Tuple is	(I$1, IADD, 4, 3)
				Four Tuple is	(I$2, IADD, 6, 5)
				Four Tuple is	(I$3, IADD, 8, 7)
				Four Tuple is	(I$4, IADD, I$3, I$2)
				Four Tuple is	(I$5, IADD, I$4, I$1)
				Four Tuple is	(I$6, IADD, I$5, I$0)
				Four Tuple is	(index, STORE, I$6, --)
##-20##
    STOUT "Register spillage should produce 37: %d\n",index;
				Four Tuple is	(20, FLAG, OFF, --)
				Four Tuple is	(printf, PROCEDURECALL, --, --)
				Four Tuple is	(--, BEGINACTUALPARAMETERLIST, --, --)
				Four Tuple is	(--, VALACTUALPARAMETER, "Register spillage should produce 37: %d\n", --)
				Four Tuple is	(--, VALACTUALPARAMETER, index, --)
				Four Tuple is	(--, ENDACTUALPARAMETERLIST, --, --)
				Four Tuple is	(printf, ENDPROCEDURECALL, --, --)
  END  // end execute
END
				Four Tuple is	(--, ENDEXECUTION, --, --)
				Four Tuple is	(registerSpillage, ENDPROGRAM, --, --)
WOOT! Start symbol on STACK!
##### CREATED ASSEMBLY CODE WITH FOURTUPLE COMMENTS #####

#________(20, FLAG, ON, --)_________

#________(registerSpillage, BEGINPROGRAM, --, --)_________
# 
	.section	.data
.SL0:	.string	"Register spillage should produce 37: %d\n"
virtual:
		.long	0

#________(index, MEMORY, 1, 1)_________
# 
index:
		.long	0

#________(--, ENDDECLARATIONS, --, --)_________
# 

#________(main, LABEL, --, --)_________
# 
	.globl main
	.type main, @function
main:
	pushl	%ebp
	movl	%esp, %ebp

#________(I$0, IADD, 3, 1)_________
# 
	movl	$1, %ebx
	movl	$3, %ecx
	movl	%ebx, %esi
	addl	%ecx, %esi

#________(I$1, IADD, 4, 3)_________
# %ebx :  $1 || %ecx :  $3 || %esi :  I$0 || 
	movl	$4, %edi
	addl	%ecx, %edi

#________(I$2, IADD, 6, 5)_________
# %ebx :  $1 || %edi :  I$1 || %ecx :  $3 || %esi :  I$0 || 
	movl	$5, %ebx
	movl	$6, %ecx
	addl	%ecx, %ebx

#________(I$3, IADD, 8, 7)_________
# %ebx :  I$2 || %edi :  I$1 || %ecx :  $6 || %esi :  I$0 || 
	movl	$7, %ecx
	movl	%esi, virtual
	movl	$8, %esi
	addl	%esi, %ecx

#________(I$4, IADD, I$3, I$2)_________
# virtual :  I$0 || %ebx :  I$2 || %edi :  I$1 || %ecx :  I$3 || %esi :  $8 || 
	addl	%ebx, %ecx

#________(I$5, IADD, I$4, I$1)_________
# virtual :  I$0 || %edi :  I$1 || %ecx :  I$4 || %esi :  $8 || 
	movl	%edi, %ebx
	addl	%ecx, %ebx

#________(I$6, IADD, I$5, I$0)_________
# virtual :  I$0 || %ebx :  I$5 || %esi :  $8 || 
	movl	virtual, %ecx
	addl	%ebx, %ecx

#________(index, STORE, I$6, --)_________
# %ecx :  I$6 || %esi :  $8 || 
	movl	%ecx, index

#________(20, FLAG, OFF, --)_________
# %esi :  $8 || 

#________(printf, PROCEDURECALL, --, --)_________

#________(--, BEGINACTUALPARAMETERLIST, --, --)_________

#________(--, VALACTUALPARAMETER, "Register spillage should produce 37: %d\n", --)_________

#________(--, VALACTUALPARAMETER, index, --)_________

#________(--, ENDACTUALPARAMETERLIST, --, --)_________
	pushl	index
	pushl	$.SL0

#________(printf, ENDPROCEDURECALL, --, --)_________
	call	printf

#________(--, ENDEXECUTION, --, --)_________
	leave

#________(registerSpillage, ENDPROGRAM, --, --)_________
	ret	
	.size	main, .-main
##### OUTPUT OF DEMONSTRATION PROGRAM #####
Register spillage should produce 37: 37
